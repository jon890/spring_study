package com.ict.human.interceptor;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import org.springframework.web.servlet.handler.HandlerInterceptorAdapter;

public class LoginInterceptor extends HandlerInterceptorAdapter {

    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler)
            throws Exception {
    	
    	//System.out.println(request.getRequestURI());
    	//System.out.println(request.getMethod());
    	
	
    	/*if(request.getMethod().equals("POST")){
        	System.out.println("POST");
    		return true;
    	} else if(request.getMethod().equals("GET")){
    		System.out.println("GET");
    		HttpSession session = request.getSession();
    	    if ( session.getAttribute("id") == null ){
    	    	response.sendRedirect("/human/login.bbs");
    	    	return false;
    	    } else {
    	    	return true; 
    	    }  
    	} else {
    		return true;
    	}*/
    	
    	HttpSession session = request.getSession();
	    if ( session.getAttribute("id") == null ){
	    	response.sendRedirect("/human/login.bbs");
	    	return false;
	    } else {
	    	return true; 
	    }
       
    }
		
}

// 인터셉트는 post와 get을 구분하지 않는다
// response에서 쓰이는 메소드는 sendRedirect가 많이 쓰인다. (특정 페이지[뷰]로 보낼 때 쓰임)

// 인터셉터 vs 필터
// 인터셉터 : dispatcher와 controller사이에서 동작
// 필터 : dispatcher 앞에서 동작